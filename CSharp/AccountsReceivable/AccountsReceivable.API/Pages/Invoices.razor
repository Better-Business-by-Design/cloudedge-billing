@page "/invoices"
@inherits DataGridPage<Document>

<Breadcrumb Items="_breadcrumb" />

<MudDataGrid 
    @ref="DataGrid" T="Document" ServerData="@(new Func<GridState<Document>, Task<GridData<Document>>>(GridServerReload))"
    SortMode="SortMode.Multiple" Filterable="true" FilterMode="DataGridFilterMode.ColumnFilterMenu"
    RowClick="@RowClicked" RowStyleFunc="@RowStyleFunc"
    Dense="true" Hover="true" Striped="true" Bordered="true" Height="calc(100vh - 9.8rem)">
    <Columns>
        <PropertyColumn Property="@(x => x.DateProcessed)" Format="dd/MM/yyyy" Title="Date"/>
        <PropertyColumn Property="@(x => x.KillSheet)" Title="KillSheet"/>
        <PropertyColumn Property="@(x => x.Farm.Name)" Title="Farm"/>
        <PropertyColumn Property="@(x => x.SpeciesTypeId)" Title="Species"/>
        <PropertyColumn Property="@(x => x.StockQuantity)" Title="Stock Count"/>
        <PropertyColumn Property="@(x => x.WeightTotal.ToString("0.00") + "kg")" Title="Stock Weight"/>
        <PropertyColumn Property="@(x => x.Plant.Name + " (" + x.Plant.Meatwork.Name + ')')" Title="Plant"/>
        <PropertyColumn Property="@(x => x.TransitQuantity)" Title="ATS Quantity"/>
        <PropertyColumn Property="@(x => x.CalcValidationId)" Title="Validation" InitialDirection="SortDirection.Descending"/>
        <PropertyColumn Property="@(x => x.StatusId)" Title="Approval Status" Sortable="StatusEditable" Filterable="StatusEditable"/>
    </Columns>
     <NoRecordsContent>
         <MudText>No matching Created Invoices found</MudText>
     </NoRecordsContent>
     <LoadingContent>
         <MudText>Loading Buyer Created Invoices...</MudText>
     </LoadingContent>
    <PagerContent>
        <MudDataGridPager T="Document" PageSizeOptions="new[] { 25, 50, 100 }"/>
    </PagerContent>
</MudDataGrid>